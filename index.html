<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Qa4ecv atbd : QA4ECV ATBD">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Qa4ecv atbd</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/UCL-EO/QA4ECV_ATBD">View on GitHub</a>

          <h1 id="project_title">Qa4ecv atbd</h1>
          <h2 id="project_tagline">QA4ECV ATBD</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/UCL-EO/QA4ECV_ATBD/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/UCL-EO/QA4ECV_ATBD/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="qa4ecv-algorithm-theoretical-basis-document" class="anchor" href="#qa4ecv-algorithm-theoretical-basis-document" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>QA4ECV Algorithm Theoretical Basis Document</h1>

<p>P.Lewis UCL/NCEO</p>

<h1>
<a id="contents" class="anchor" href="#contents" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Contents</h1>

<ul>
<li><a href="https://github.com/UCL-EO/QA4ECV_ATBD/tree/master/notebooks/Get%20data.ipynb">Download and sort data</a></li>
</ul>

<p>In this section, we download the test dataset from the server as a set of <code>netcdf</code> files and harmonise most of the labelling across datasets. We also perform narrow to broadband conversion on the MODIS datasets, apply QA masks and do any scaling. </p>

<p>The result of this is set of <code>pickle</code> (storage) <code>s1.0</code> (i.e. 'stage 1.0' of processing, which is really just a dump from the netcdf files for a single pixel in time) files containing the original data:</p>

<pre><code>notebooks/obj/bbdr.flags_s1.0_.pkl
notebooks/obj/bbdr.meris_s1.0_.pkl
notebooks/obj/bbdr.vgt_s1.0_.pkl
notebooks/obj/ga.brdf.merge_s1.0_.pkl
notebooks/obj/ga.brdf.nosnow_s1.0_.pkl
notebooks/obj/ga.brdf.snow_s1.0_.pkl
notebooks/obj/mod09_s1.0_.pkl
notebooks/obj/myd09_s1.0_.pkl
notebooks/obj/prior.v2.nosnow_s1.0_.pkl
notebooks/obj/prior.v2.snow_s1.0_.pkl
notebooks/obj/prior.v2.snownosnow_s1.0_.pkl
</code></pre>

<p>and a set of <code>s2.0</code> files containing the masked and organised datasets.</p>

<pre><code>notebooks/obj/bbdr.flags_s2.0_.pkl
notebooks/obj/bbdr.meris_s2.0_.pkl
notebooks/obj/bbdr.vgt_s2.0_.pkl
notebooks/obj/ga.brdf.merge_s2.0_.pkl
notebooks/obj/ga.brdf.nosnow_s2.0_.pkl
notebooks/obj/ga.brdf.snow_s2.0_.pkl
notebooks/obj/mod09_s2.0_.pkl
notebooks/obj/myd09_s2.0_.pkl
notebooks/obj/prior.v2.nosnow_s2.0_.pkl
notebooks/obj/prior.v2.snow_s2.0_.pkl
notebooks/obj/prior.v2.snownosnow_s2.0_.pkl
</code></pre>

<ul>
<li><a href="https://github.com/UCL-EO/QA4ECV_ATBD/tree/master/notebooks/Load%20data.ipynb">Load data and and prepare constraint matrices</a></li>
</ul>

<p>This section reads the data from the <code>s2.0</code> files and organises into <code>s3.0</code> files, with the data organised as matrices:</p>

<pre><code>notebooks/obj/bbdr.meris_s3.0_.pkl
notebooks/obj/bbdr.vgt_s3.0_.pkl
notebooks/obj/mod09_s3.0_.pkl
notebooks/obj/myd09_s3.0_.pkl
</code></pre>

<p>The <code>s3.0</code> files are slimmed down sources of processed information. You can do all of the modelling and inversion with these files alone (other than e.g. comparison with original reflectance data for e.g. outlier detection). They contain <em>only</em> the following keys:</p>

<pre><code>['kernels', 'weight', 'idoy', 'doy', 'refl', 'year', 'date']
</code></pre>

<p>which is the critical information for modelling organised appropriately.</p>

<p>In this section, we also prepare matrices for other constraints we might want and the <code>A</code> and <code>b</code> matrices (full size, sparse representations). At present, these (<code>Ab</code> files) are:</p>

<pre><code>notebooks/obj/D1_Ab_.pkl
notebooks/obj/D365_Ab_.pkl
notebooks/obj/bbdr.meris_Ab_.pkl
notebooks/obj/bbdr.vgt_Ab_.pkl
notebooks/obj/myd09_Ab_.pkl
notebooks/obj/mod09_Ab_.pkl
notebooks/obj/prior.v2.nosnow_Ab_.pkl
notebooks/obj/prior.v2.snow_Ab_.pkl
</code></pre>

<p>The files <code>D1_Ab</code> and <code>D365_Ab</code> contain differential constraint (sparse) matrices for imposing smoothness in time.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Qa4ecv atbd maintained by <a href="https://github.com/UCL-EO">UCL-EO</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
